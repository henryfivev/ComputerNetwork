# 计算机网络 · 理论作业2

## 20337251伍建霖

### P15

<img src="D:\CodeField\TyporaPicture\image-20220921212554282.png" alt="image-20220921212554282" style="zoom:70%;" />

a) 没有。

​	E可以查看主机F的IP地址的子网前缀，然后得知F是开启的同一个局域网。因此，E 不会将数据包发送到默认路由器 R1。 

​	从 E 到 F 的以太网帧： 源 IP = E 的 IP 地址，目标 IP = F 的 IP 地址，源 MAC = E 的 MAC 地址，目的 MAC = F 的 MAC 地址 

b) 不，因为它们不在同一个 LAN 上。 

​	E可以通过检查B的IP来发现这一点地址。

​	从 E 到 R1 的以太网帧： 源 IP = E 的 IP 地址，目标 IP = B 的 IP 地址 ，源 MAC = E 的 MAC 地址 ，目标 MAC = R1 连接到子网 3 的接口的 MAC 地址。 

c) 交换机 S1 将通过其两个接口广播以太网帧作为接收到的 ARP 帧的目的地址是一个广播地址。

​	它得知 A 存在在连接到子网 1 的接口处连接到 S1 的子网 1 上。并且，S1 将更新其转发表以包含主机 A 的条目。 是的，路由器 R1 也收到此 ARP 请求消息，但 R1 不会转发子网 3 的消息。 B 不会发送询问 A 的 MAC 地址的 ARP 查询消息，因为这个地址可以 从 A 的查询消息中获取。 一旦交换机 S1 收到 B 的响应消息，它会在它的主机 B 中添加一个条目。 转发表，然后丢弃接收到的帧，因为目标主机 A 在 与主机 B 相同的接口（即 A 和 B 在同一 LAN 网段上）。

### P18

<img src="D:\CodeField\TyporaPicture\image-20220921213117142.png" alt="image-20220921213117142" style="zoom:70%;" />

答：A在576比特时刻完成传输。在最坏的情况下，B在324比特时间开始传输（也就是恰好在A的信号到达B之前），B的信号将在324+325=649比特时间到达A，所以A能完成传输。

### P26

<img src="D:\CodeField\TyporaPicture\image-20220921213141956.png" alt="image-20220921213141956" style="zoom:80%;" />

(i)ACDEF，交换机表为空，故广播

(ii)B，已知B的MAC地址，故可以直接发给B

(iii)B，同(ii)

(iiii)A，已知A的MAC地址，故可以直接发给A

### P28

<img src="D:\CodeField\TyporaPicture\image-20220921213157520.png" alt="image-20220921213157520" style="zoom:80%;" />

​	EE部门这三台电脑的IP地址（从左到右）分别是： 111.111.1.1、111.111.1.2、111.111.1.3。子网掩码为 111.111.1/24。 CS部那三台电脑的IP地址（从左到右）分别是： 111.111.2.1、111.111.2.2、111.111.2.3。子网掩码为 111.111.2/24。 

​	连接到端口 1 的路由器接口卡可以配置包含两个子接口 IP 地址：111.111.1.0 和 111.111.2.0。第一个是EE的子网部门，第二个是为CS部门的子网。每个 IP 地址是与 VLAN ID 关联。假设 111.111.1.0 与 VLAN 11 相关联，并且 111.111.2.0 与 VLAN 12 相关联。这意味着来自子网 111.111.1/24 将添加一个 VLAN ID 为 11 的 802.1q 标签，并且每个帧来自 111.111.2/24 将添加一个 VLAN ID 为 12 的 802.1q 标签。 

​	假设 EE 部门的主机 A 的 IP 地址为 111.111.1.1 想要发送一个 发往 CS 部门主机 B (111.111.2.1) 的 IP 数据报。 Host A首先封装IP数据报（发往 111.111.2.1）到一个目标 MAC 地址等于的帧中连接到交换机端口 1 的路由器接口卡的 MAC 地址。一次路由器接收到帧，然后将其向上传递到 IP 层，IP 层决定 IP 数据报应通过子接口111.111.2.0 转发到子网 111.111.2/24。 

​	然后路由器将IP数据报封装成一个帧发送到端口1。注意此帧有一个 802.1q 标记 VLAN ID 12。一旦交换机收到帧端口 1，它知道这个帧的目的地是 ID 为 12 的 VLAN，所以交换机会发送这个帧到 CS 部门的 Host B。主机 B 收到此帧后，将删除 802.1q 标签。

### P29

<img src="D:\CodeField\TyporaPicture\image-20220921213217179.png" alt="image-20220921213217179" style="zoom:80%;" />

答：

<img src="D:\CodeField\TyporaPicture\image-20220921221920374.png" alt="image-20220921221920374" style="zoom:90%;" />