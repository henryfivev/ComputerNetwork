# 计算机网络 · 实验9报告

20337251 伍建霖

## 1. 实验目的

1. 掌握标准访问列表规则及配置。 
2. 掌握扩展访问列表规则及配置。 
3. 了解标准访问列表和扩展访问列表的区别。

## 2. 实验内容

完成教材实例 8-4（P296），请写出步骤 1 安装与建立 FTP、WEB，的步骤，并完成 P297～P298 的测试要求。

## 3. 实验记录（实验8-4）

### 配置PC和服务器的IP地址，子网掩码和网关

<img src="D:\CodeField\TyporaPicture\image-20221028135730811.png" alt="image-20221028135730811" style="zoom:40%;" />

由上述拓扑图可得PC和服务器的IP地址，子网掩码和网关如下：

<img src="D:\CodeField\TyporaPicture\image-20221028135825276.png" alt="image-20221028135825276" style="zoom:40%;" />

由于未设置路由表，故PC和服务器之间无法 ping 通；PC之间可以 ping 通。

### 安装FTP和WWW服务器

我使用filezilla来搭建ftp服务器，apache来搭建www服务器。

#### ftp服务器

按照https://jingyan.baidu.com/article/63f236286ca3d60208ab3d23.html中的步骤进行配置：

下载安装，配置管理密码和端口，设置本机IP地址，添加用户，设置共享文件夹。后续步骤可证明安装成功。

#### www服务器

从https://www.apachelounge.com/download/下载后，配置 httpd.conf 文件，修改apache路径并添加服务器IP配置，接着在/bin目录下的cmd中输入 httpd -k install 命令即可。在浏览器地址栏中输入 "localhost"即可打开网页。

<img src="D:\CodeField\TyporaPicture\image-20221028142655389.png" alt="image-20221028142655389" style="zoom:40%;" />

​																	（www服务器配置成功）

### 配置路由器

按照书上的命令配置路由器即可。gi0/0连接192.168.1.0网段，gi0/1连接10.1.1.0网段。

<img src="D:\CodeField\TyporaPicture\image-20221028143614867.png" alt="image-20221028143614867" style="zoom:50%;" />

​																	（路由器配置结果）

### 验证当前配置

#### 验证主机和服务器之间的连通性

配置好路由器和服务器后，PC可以 ping 通ftp服务器和www服务器。

<img src="D:\CodeField\TyporaPicture\image-20221028143851652.png" alt="image-20221028143851652" style="zoom:67%;" />

​																			（PC ping 服务器结果）

#### 登录ftp服务器和访问www服务器

在配置好路由器和服务器后，经理机和员工机都能登录ftp服务器和服务www服务器。

但由于未设置ACL，所以还不能限制PC的访问。

### 配置时间段

按照书上的命令，将weekdays的上午9点到下午6点定义为work-time。

<img src="D:\CodeField\TyporaPicture\image-20221028144735410.png" alt="image-20221028144735410" style="zoom:40%;" />

​																	（配置时间段的命令）

### 配置ACL并应用

按照书上的命令对经理机和员工机的访问进行限制。

使用 ip access-list extended accessctrl 命令进入配置选项。

使用 permit 命令允许主机访问。

使用 deny 命令禁止主机访问。

接着将ACL应用到 gi0/0 端口的输入方向。

<img src="D:\CodeField\TyporaPicture\image-20221028145415056.png" alt="image-20221028145415056" style="zoom:40%;" />

​																	（ACL配置结果）

### 验证ACL

#### 查看系统时间

输入 show clock 命令显示当前时间。

<img src="D:\CodeField\TyporaPicture\image-20221028150802808.png" alt="image-20221028150802808" style="zoom:50%;" />

#### 经理访问

按照设想经理可以在任意时段访问www服务器和登录ftp服务器，实验结果确实如此。

<img src="D:\CodeField\TyporaPicture\image-20221028151518785.png" alt="image-20221028151518785" style="zoom:40%;" />

​																（经理下班后访问www服务器）

<img src="D:\CodeField\TyporaPicture\image-20221028151553226.png" alt="image-20221028151553226" style="zoom:35%;" />

​																（经理下班后登录ftp服务器）

#### 员工访问

按照设想员工在下班后可以访问www服务器，但不能登录ftp服务器，实验结果确实如此。

<img src="D:\CodeField\TyporaPicture\image-20221028151853844.png" alt="image-20221028151853844" style="zoom:40%;" />

​																（员工下班后访问www服务器，成功）

<img src="D:\CodeField\TyporaPicture\image-20221028152036401.png" alt="image-20221028152036401" style="zoom:80%;" />

​																（员工下班后登录ftp服务器，失败）

<img src="D:\CodeField\TyporaPicture\image-20221028152724568.png" alt="image-20221028152724568" style="zoom:30%;" />

​																（员工下班后登录ftp服务器时抓包情况）

抓包分析：ftp服务器无法访问，可以捕获到 PC 发往服务器的 Retransmission 报文，而ftp服务器没有回应。多次刷新，可以看到每次发送一个 TCP SYN 包和两个 Retransmission 重发包。

#### 修改时间

输入 clock set 10:00:00  10 28 2022 修改时间。该时间为上班时间。

<img src="D:\CodeField\TyporaPicture\image-20221028151337726.png" alt="image-20221028151337726" style="zoom:40%;" />

#### 经理访问

经理依旧能访问www服务器和登录ftp服务器。

#### 员工访问

按照设想员工在上班时间不能访问www服务器，但可以登录ftp服务器，实验结果确实如此。

<img src="D:\CodeField\TyporaPicture\image-20221028155016447.png" alt="image-20221028155016447" style="zoom:67%;" />

​														（员工上班时间访问www服务器，失败）

<img src="D:\CodeField\TyporaPicture\image-20221028155250347.png" alt="image-20221028155250347" style="zoom:110%;" />

​													（员工上班时间登录ftp服务器，成功）

<img src="D:\CodeField\TyporaPicture\image-20221028155418606.png" alt="image-20221028155418606" style="zoom:40%;" />

​													（员工上班时间登录ftp服务器时抓包情况）

## 4. 实验总结

​	这次实验主要学习了ACL，访问控制表，掌握标准访问列表规则及配置。主要是要特别注意指令的顺序。掌握扩展访问列表规则及配置，扩展访问增加了一些指令。

​	了解标准访问列表和扩展访问列表的区别。访问控制列表(ACL)是应用在路由器接口的指令列表。这些指令列表用来告诉路由器哪能些数据包可以收、哪能数据包需要拒绝。至于数据包是被接收还是拒绝，可以由类似于源地址、目的地址、端口号等的特定指示条件来决定。扩展访问控制列表其中重要的一种是IP访问控制列表。扩展IP访问控制列表比标准IP访问控制列表具有更多的匹配项，包括协议类型、源地址、目的地址、源端口、目的端口、建立连接的和IP优先级等。编号范围是从100到199的访问控制列表是扩展IP访问控制列表。
